// prisma/schema.prisma
// 改完数据库结构使用：npx prisma migrate dev --name ***（行为命名）


// 生成 Prisma Client（操作数据库的 TS 客户端）
generator client {
  provider = "prisma-client-js"
  // 先用默认输出路径 @prisma/client，方便直接 import
  // 以后你真想放到别的地方，再一起改
}

// 数据源：我们用 SQLite，本地文件 dev.db
datasource db {
  provider = "sqlite"
}

// 品牌表：比如 RAYS / WORK / RSSW
model Brand {
  id       Int       @id @default(autoincrement())
  name     String
  slug     String    @unique
  products Product[]
}

// 轮毂“系列”表：比如 RSSW Private 这一整款
model Product {
  id          Int        @id @default(autoincrement())
  brandId     Int
  brand       Brand      @relation(fields: [brandId], references: [id])

  name        String     // 型号名，比如 "Private"
  description String?    // 可选：文案介绍
  mainImage   String?    // 主图 URL（以后你有图床再填）

  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  variants    Variant[]
}

// 具体 SKU：18x8.0 5x114.3 +42 Hyper Silver 这一条就是一个 Variant
model Variant {
  id             Int      @id @default(autoincrement())
  productId      Int
  product        Product   @relation(fields: [productId], references: [id])

  sku            String   @unique   // 真正卖货用的 SKU
  diameterInch   Int      // 直径：18
  widthInch      Float    // 宽度：8.0
  offset         Int      // ET：+42
  boltPattern    String   // 例： "5x114.3"
  centerBore     Float?   // 中心孔 mm 可选
  finish         String?  // Hyper Silver / Gloss Black 之类

  price          Float    // 售价（CAD）
  stock          Int      @default(0)

  winterApproved Boolean  @default(false)
  evApproved     Boolean  @default(false)
}
